<div
  class="flex h-[100dvh] bg-vera-cream dark:bg-[#1E1E1E] text-primary dark:text-vera-cream overflow-hidden relative font-sans bg-[url('/images/background.png')] dark:bg-none bg-cover bg-center bg-no-repeat"
>
  <!-- Mobile Backdrop -->
  <div
    class="absolute inset-0 bg-black/50 z-20 md:hidden transition-opacity duration-300"
    [class.opacity-0]="!isSidebarOpen()"
    [class.pointer-events-none]="!isSidebarOpen()"
    [class.opacity-100]="isSidebarOpen()"
    (click)="toggleSidebar()"
    (keydown.enter)="toggleSidebar()"
    (keydown.space)="toggleSidebar()"
    tabindex="0"
    role="button"
  ></div>

  <!-- Sidebar -->
  <app-sidebar
    class="z-30 h-full flex-shrink-0 flex absolute md:relative shadow-2xl md:shadow-none transition-transform duration-300 ease-in-out"
    [class.-translate-x-full]="!isSidebarOpen()"
    [class.translate-x-0]="isSidebarOpen()"
    [class.md:translate-x-0]="true"
    [class.md:hidden]="!isSidebarOpen()"
    [class.md:flex]="isSidebarOpen()"
    [conversations]="conversations()"
    [currentConversationId]="currentConversationId()"
    (selectConversation)="selectConversation($event)"
    (newChat)="startNewChat()"
    (deleteConversation)="deleteConversation($event)"
    (closeSidebar)="toggleSidebar()"
  ></app-sidebar>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col min-w-0 relative z-10 h-full">
    <!-- Header Area with Toggle -->
    <div class="flex items-center w-full">
      <button
        (click)="toggleSidebar()"
        class="p-2 ml-2 text-primary dark:text-vera-cream hover:bg-black/5 dark:hover:bg-white/10 rounded-lg transition-colors md:hidden"
      >
        <span class="material-icons-outlined">menu</span>
      </button>
      <app-chat-header class="flex-1"></app-chat-header>
    </div>

    <!-- Chat Area -->
    <app-chat-messages
      [messages]="messages()"
      class="flex-1 min-h-0 z-0"
    ></app-chat-messages>

    <!-- Input Area -->
    <app-chat-input
      class="z-20 flex-shrink-0"
      (sendText)="onSendText($event)"
      (sendFile)="onSendFile($event)"
    ></app-chat-input>
  </div>
</div>
